(this["webpackJsonpreact-challenge"]=this["webpackJsonpreact-challenge"]||[]).push([[0],{20:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(16),l=a.n(r),s=a(3),o=(a(25),function(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"header-container"},c.a.createElement("div",{className:"brand"},c.a.createElement(s.c,{to:"/"},c.a.createElement("span",{role:"img","aria-label":"football"},"\u26bd\ufe0f")," League App")),c.a.createElement("nav",null,c.a.createElement("ul",{className:"unstyled"},c.a.createElement("li",null,c.a.createElement(s.c,{activeClassName:"active",to:"/table"},"table")),c.a.createElement("li",null,c.a.createElement(s.c,{activeClassName:"active",to:"/weeks"},"weeks")))))))}),m=a(1),u=function(e){return e.table.map((function(e,t){var a="".concat("http://acor.sl.pt:7777/logos/").concat(e.teamId),n="".concat("/teams/").concat(e.teamId),r=t+1;return c.a.createElement("tr",{key:e.teamId},c.a.createElement("td",null,r),c.a.createElement("td",null,c.a.createElement(s.b,{to:n},c.a.createElement("img",{src:a,alt:e.teamName}),c.a.createElement("span",null,e.teamName))),c.a.createElement("td",null,c.a.createElement("strong",null,e.points)),c.a.createElement("td",null,e.won),c.a.createElement("td",null,e.drawn),c.a.createElement("td",null,e.lost),c.a.createElement("td",null,e.goals),c.a.createElement("td",null,e.goalsConceded),c.a.createElement("td",null,e.goalsDifference))}))},i=(a(31),function(e){var t=e.table;return c.a.createElement("table",{className:"table-result"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{title:"Position"},c.a.createElement("span",null,"Position")),c.a.createElement("th",{title:"Team"},"Team"),c.a.createElement("th",{title:"Points"},"P",c.a.createElement("span",null,"oints")),c.a.createElement("th",{title:"Won"},"W",c.a.createElement("span",null,"on")),c.a.createElement("th",{title:"Drawn"},"D",c.a.createElement("span",null,"rawn")),c.a.createElement("th",{title:"Lost"},"L",c.a.createElement("span",null,"ost")),c.a.createElement("th",{title:"Goals For"},"GF"),c.a.createElement("th",{title:"Goals Against"},"GA"),c.a.createElement("th",{title:"Goals Difference"},"GD"))),c.a.createElement("tbody",null,c.a.createElement(u,{table:t})))}),E=function(e,t){var a=e.indexOf(t);return[a,0===a?1:0]},f=function(e){var t=e.teams,a=e.teamIds,n=e.score,c=Object(m.a)(t,2),r=c[0],l=c[1],s=Object(m.a)(a,2),o=s[0],u=s[1],i=Object(m.a)(n,2),E=i[0],f=i[1];return[{team:r,teamId:o,score:E,winner:E>f},{team:l,teamId:u,score:f,winner:f>E}]},d=function(e,t){var a=e.score>t.score?1:0,n=e.score===t.score?1:0;return{matches:1,points:3*a||n,won:a,drawn:n,lost:e.score<t.score?1:0,goals:e.score,goalsConceded:t.score,goalsDifference:e.score-t.score}},p=function(e,t){return function(e){var t=[];for(var a in e){var n=e[a],c={drawn:0,goals:0,goalsConceded:0,goalsDifference:0,lost:0,matches:0,points:0,teamId:n[0].team.teamId,teamName:a,won:0};for(var r in n){var l=n[r],s=d(l.team,l.opponent);for(var o in s)c[o]+=s[o]}t.push(c)}return t}(function(e,t){var a={};for(var n in e)a[e[n]]=[];for(var c in t){var r=t[c];for(var l in r){var s=r[l],o=f(s);for(var u in s.teams){var i=s.teams[u],d=E(s.teams,i),p=Object(m.a)(d,2),v=p[0],h=p[1],b=o[v],g=o[h];a[i].push({team:b,opponent:g})}}}return a}(e,t)).sort((function(e,t){var a=t.points-e.points,n=t.goalsDifference-e.goalsDifference,c=t.goals-e.goals;return a||n||c}))},v=a(19),h=a.n(v),b=function(e){return new Promise((function(t,a){h()("".concat("http://acor.sl.pt:7777").concat(e)).end((function(e,n){return!e&&n.ok?t(n.body):a(e)}))}))},g=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=[b("/teams"),b("/weeks")];Promise.all(e).then((function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1],c=p(a,n);r(c)}))}),[]),a.length?c.a.createElement("div",{className:"table"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("h1",null,"Ranking"),c.a.createElement(i,{table:a}))):c.a.createElement("div",{className:"wrapper"},"Loading...")},w=(a(38),function(e){var t=e.teamId,a=e.team,n=e.score,r=e.winner,l="".concat("http://acor.sl.pt:7777/logos/").concat(t),o="".concat("/teams/").concat(t),m=r?"winner":"";return c.a.createElement("div",{key:t,className:"result-team ".concat(m)},c.a.createElement("div",{className:"result-team-image"},c.a.createElement(s.b,{to:o},c.a.createElement("img",{src:l,alt:a}))),c.a.createElement("div",{className:"result-team-name"},c.a.createElement(s.b,{to:o},a)),c.a.createElement("div",{className:"result-team-score"},n))}),N=(a(39),function(e){var t=f(e).map((function(e){return c.a.createElement(w,Object.assign({key:e.teamId},e))}));return c.a.createElement("div",{className:"result"},t)}),k=function(e){var t=e.results.map((function(e,t){return c.a.createElement(N,Object.assign({key:t},e))}));return t.length?t:c.a.createElement("p",null,"No results found")},O={matches:"Matches",points:"Points",won:"Wins",drawn:"Draws",lost:"Losses",goals:"Goals",goalsConceded:"Goals Conceded"},j=function(e){var t=e.rows;return Object.entries(O).map((function(e){var a=Object(m.a)(e,2),n=a[0],r=a[1];return c.a.createElement("tr",{key:n},c.a.createElement("th",null,r),c.a.createElement("td",null,t[n]))}))},C=(a(40),function(e){return c.a.createElement("table",{className:"table-object"},c.a.createElement("tbody",null,c.a.createElement(j,{rows:e})))}),y=(a(41),function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(null),o=Object(m.a)(s,2),u=o[0],i=o[1],p=Object(n.useState)(!1),v=Object(m.a)(p,2),h=v[0],g=v[1];return Object(n.useEffect)((function(){var t=e.match.params.index;b("".concat("/teams/").concat(t)).then((function(e){l(e),g(!1)}))}),[e.match.params.index]),Object(n.useEffect)((function(){if(r){var e=function(e){var t=e.id,a=e.results,n=parseInt(t,10),c={matches:0,points:0,won:0,drawn:0,lost:0,goals:0,goalsConceded:0,goalsDifference:0};return a.forEach((function(e){var t=E(e.teamIds,n),a=Object(m.a)(t,2),r=a[0],l=a[1],s=f(e),o=s[r],u=s[l],i=d(o,u);for(var p in i)c[p]+=i[p]})),c}(r);i(e)}}),[r]),r?c.a.createElement("div",{className:"team"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement("aside",null,c.a.createElement("img",{src:r.logo,alt:r.name}),c.a.createElement("h1",null,r.name),c.a.createElement("button",{className:"toggle-info",onClick:function(e){g(!h),e.preventDefault()}},"".concat(h?"Close":"Open"," team stats")),c.a.createElement("div",{className:"team-info ".concat(h?"collapsed":"")},c.a.createElement(C,u))),c.a.createElement("main",null,c.a.createElement("h2",null,"Results"),c.a.createElement(k,{results:r.results}))))):c.a.createElement("div",{className:"wrapper"},"Loading...")}),I=a(7),D=function(e){var t=e.weeks.map((function(e){return c.a.createElement("li",{key:e},c.a.createElement(s.c,{activeClassName:"active",to:"".concat("/weeks/").concat(e)},e))}));return c.a.createElement("ul",{className:"unstyled"},t)},x=function(e){var t=e.chosenWeek,a=e.handleChange,n=e.weeks.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}));return c.a.createElement("select",{defaultValue:t,onChange:a},n)},G=(a(42),function(e){var t=e.chosenWeek,a=e.results,n=e.handleChange,r=a.map((function(e,t){return t+1})),l={chosenWeek:t,handleChange:n,weeks:r};return c.a.createElement("div",{className:"week-links"},c.a.createElement(D,{weeks:r}),c.a.createElement(x,l))}),W=function(e){var t=parseInt(e-1,10);return isNaN(t)?0:t},L=function(e){var t=Object(I.g)(),a=W(e.match.params.index),r=Object(n.useState)([]),l=Object(m.a)(r,2),s=l[0],o=l[1],u=Object(n.useState)(a),i=Object(m.a)(u,2),E=i[0],f=i[1];Object(n.useEffect)((function(){b("/weeks").then((function(e){o(e)}))}),[]),Object(n.useEffect)((function(){var t=W(e.match.params.index);f(t)}),[e.match.params.index]);var d={chosenWeek:E+1,results:s,handleChange:function(e){t.push("".concat("/weeks/").concat(e.target.value))}};return s.length?c.a.createElement("div",{className:"weeks"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement("aside",null,c.a.createElement("h2",null,"Weeks"),c.a.createElement(G,d)),c.a.createElement("main",null,c.a.createElement("h1",null,"Results for week #",E+1),c.a.createElement(k,{results:s[E]}))))):c.a.createElement("div",{className:"wrapper"},"Loading...")},P=(a(43),document.querySelector("#root"));l.a.render(c.a.createElement((function(){return c.a.createElement(s.a,null,c.a.createElement(o,null),c.a.createElement(I.d,null,c.a.createElement(I.b,{path:"/weeks/:index",component:L}),c.a.createElement(I.b,{path:"/teams/:index",component:y}),c.a.createElement(I.b,{path:"/table",component:g}),c.a.createElement(I.a,{from:"/",to:"/weeks/1"})))}),null),P)}},[[20,1,2]]]);
//# sourceMappingURL=main.060208b7.chunk.js.map
(this["webpackJsonppoco-football-app"]=this["webpackJsonppoco-football-app"]||[]).push([[0],{20:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(16),r=a.n(l),s=a(3),o=(a(25),function(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"header-container"},c.a.createElement("div",{className:"brand"},c.a.createElement(s.c,{to:"/"},c.a.createElement("span",{role:"img","aria-label":"football"},"\u26bd\ufe0f")," ","League App")),c.a.createElement("nav",null,c.a.createElement("ul",{className:"unstyled"},c.a.createElement("li",null,c.a.createElement(s.c,{activeClassName:"active",to:"/table"},"table")),c.a.createElement("li",null,c.a.createElement(s.c,{activeClassName:"active",to:"/weeks"},"weeks")))))))}),m=a(1),i=a(19),u=a.n(i),E="https://football-server.eliamartani.now.sh/api",f=function(e){return new Promise((function(t,a){u()("".concat(E).concat(e)).end((function(e,n){return!e&&n.ok?t(n.body):a(e)}))}))},d=function(e){return e.table.map((function(e,t){var a="".concat(E,"/logos/").concat(e.teamId),n="".concat("/teams/").concat(e.teamId),l=t+1;return c.a.createElement("tr",{key:e.teamId},c.a.createElement("td",null,l),c.a.createElement("td",null,c.a.createElement(s.b,{to:n},c.a.createElement("img",{src:a,alt:e.teamName,loading:"lazy"}),c.a.createElement("span",null,e.teamName))),c.a.createElement("td",null,c.a.createElement("strong",null,e.points)),c.a.createElement("td",null,e.won),c.a.createElement("td",null,e.drawn),c.a.createElement("td",null,e.lost),c.a.createElement("td",null,e.goals),c.a.createElement("td",null,e.goalsConceded),c.a.createElement("td",null,e.goalsDifference))}))},p=(a(37),function(e){var t=e.table;return c.a.createElement("table",{className:"table-result"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{title:"Position"},c.a.createElement("span",null,"Position")),c.a.createElement("th",{title:"Team"},"Team"),c.a.createElement("th",{title:"Points"},"P",c.a.createElement("span",null,"oints")),c.a.createElement("th",{title:"Won"},"W",c.a.createElement("span",null,"on")),c.a.createElement("th",{title:"Drawn"},"D",c.a.createElement("span",null,"rawn")),c.a.createElement("th",{title:"Lost"},"L",c.a.createElement("span",null,"ost")),c.a.createElement("th",{title:"Goals For"},"GF"),c.a.createElement("th",{title:"Goals Against"},"GA"),c.a.createElement("th",{title:"Goals Difference"},"GD"))),c.a.createElement("tbody",null,c.a.createElement(d,{table:t})))}),v=function(e,t){var a=e.indexOf(t);return[a,0===a?1:0]},h=function(e){var t=e.teams,a=e.teamIds,n=e.score,c=Object(m.a)(t,2),l=c[0],r=c[1],s=Object(m.a)(a,2),o=s[0],i=s[1],u=Object(m.a)(n,2),E=u[0],f=u[1];return[{team:l,teamId:o,score:E,winner:E>f},{team:r,teamId:i,score:f,winner:f>E}]},b=function(e,t){var a=e.score>t.score?1:0,n=e.score===t.score?1:0;return{matches:1,points:3*a||n,won:a,drawn:n,lost:e.score<t.score?1:0,goals:e.score,goalsConceded:t.score,goalsDifference:e.score-t.score}},g=function(e,t){return function(e){var t=[];for(var a in e){var n=e[a],c={drawn:0,goals:0,goalsConceded:0,goalsDifference:0,lost:0,matches:0,points:0,teamId:n[0].team.teamId,teamName:a,won:0};for(var l in n){var r=n[l],s=b(r.team,r.opponent);for(var o in s)c[o]+=s[o]}t.push(c)}return t}(function(e,t){var a={};for(var n in e)a[e[n]]=[];for(var c in t){var l=t[c];for(var r in l){var s=l[r],o=h(s);for(var i in s.teams){var u=s.teams[i],E=v(s.teams,u),f=Object(m.a)(E,2),d=f[0],p=f[1],b=o[d],g=o[p];a[u].push({team:b,opponent:g})}}}return a}(e,t)).sort((function(e,t){var a=t.points-e.points,n=t.goalsDifference-e.goalsDifference,c=t.goals-e.goals;return a||n||c}))},w=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=[f("/teams"),f("/weeks")];Promise.all(e).then((function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1],c=g(a,n);l(c)}))}),[]),a.length?c.a.createElement("div",{className:"table"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("h1",null,"Ranking"),c.a.createElement(p,{table:a}))):c.a.createElement("div",{className:"wrapper"},"Loading...")},N=(a(38),function(e){var t=e.teamId,a=e.team,n=e.score,l=e.winner,r="".concat(E,"/logos/").concat(t),o="".concat("/teams/").concat(t),m=l?"winner":"";return c.a.createElement("div",{key:t,className:"result-team ".concat(m)},c.a.createElement("div",{className:"result-team-image"},c.a.createElement(s.b,{to:o},c.a.createElement("img",{src:r,alt:a,loading:"lazy"}))),c.a.createElement("div",{className:"result-team-name"},c.a.createElement(s.b,{to:o},a)),c.a.createElement("div",{className:"result-team-score"},n))}),k=(a(39),function(e){var t=h(e).map((function(e){return c.a.createElement(N,Object.assign({key:e.teamId},e))}));return c.a.createElement("div",{className:"result"},t)}),O=function(e){var t=e.results.map((function(e,t){return c.a.createElement(k,Object.assign({key:t},e))}));return t.length?t:c.a.createElement("p",null,"No results found")},j={matches:"Matches",points:"Points",won:"Wins",drawn:"Draws",lost:"Losses",goals:"Goals",goalsConceded:"Goals Conceded"},y=function(e){var t=e.rows;return Object.entries(j).map((function(e){var a=Object(m.a)(e,2),n=a[0],l=a[1];return c.a.createElement("tr",{key:n},c.a.createElement("th",null,l),c.a.createElement("td",null,t[n]))}))},C=(a(40),function(e){return c.a.createElement("table",{className:"table-object"},c.a.createElement("tbody",null,c.a.createElement(y,{rows:e})))}),I=(a(41),function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(null),o=Object(m.a)(s,2),i=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(m.a)(d,2),g=p[0],w=p[1];if(Object(n.useEffect)((function(){var t=e.match.params.index;f("".concat("/teams/").concat(t)).then((function(e){r(e),w(!1)}))}),[e.match.params.index]),Object(n.useEffect)((function(){if(l){var e=function(e){var t=e.id,a=e.results,n=parseInt(t,10),c={matches:0,points:0,won:0,drawn:0,lost:0,goals:0,goalsConceded:0,goalsDifference:0};return a.forEach((function(e){var t=v(e.teamIds,n),a=Object(m.a)(t,2),l=a[0],r=a[1],s=h(e),o=s[l],i=s[r],u=b(o,i);for(var E in u)c[E]+=u[E]})),c}(l);u(e)}}),[l]),!l)return c.a.createElement("div",{className:"wrapper"},"Loading...");var N="".concat(E,"/logos/").concat(l.id);return c.a.createElement("div",{className:"team"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement("aside",null,c.a.createElement("img",{src:N,alt:l.name,loading:"lazy"}),c.a.createElement("h1",null,l.name),c.a.createElement("button",{className:"toggle-info",onClick:function(e){w(!g),e.preventDefault()}},"".concat(g?"Close":"Open"," team stats")),c.a.createElement("div",{className:"team-info ".concat(g?"collapsed":"")},c.a.createElement(C,i))),c.a.createElement("main",null,c.a.createElement("h2",null,"Results"),c.a.createElement(O,{results:l.results})))))}),D=a(7),x=function(e){var t=e.weeks.map((function(e){return c.a.createElement("li",{key:e},c.a.createElement(s.c,{activeClassName:"active",to:"".concat("/weeks/").concat(e)},e))}));return c.a.createElement("ul",{className:"unstyled"},t)},G=function(e){var t=e.chosenWeek,a=e.handleChange,n=e.weeks.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}));return c.a.createElement("select",{defaultValue:t,onChange:a},n)},W=(a(42),function(e){var t=e.chosenWeek,a=e.results,n=e.handleChange,l=a.map((function(e,t){return t+1})),r={chosenWeek:t,handleChange:n,weeks:l};return c.a.createElement("div",{className:"week-links"},c.a.createElement(x,{weeks:l}),c.a.createElement(G,r))}),L=function(e){var t=parseInt(e-1,10);return isNaN(t)?0:t},P=function(e){var t=Object(D.g)(),a=L(e.match.params.index),l=Object(n.useState)([]),r=Object(m.a)(l,2),s=r[0],o=r[1],i=Object(n.useState)(a),u=Object(m.a)(i,2),E=u[0],d=u[1];Object(n.useEffect)((function(){f("/weeks").then((function(e){o(e)}))}),[]),Object(n.useEffect)((function(){var t=L(e.match.params.index);d(t)}),[e.match.params.index]);var p={chosenWeek:E+1,results:s,handleChange:function(e){t.push("".concat("/weeks/").concat(e.target.value))}};return s.length?c.a.createElement("div",{className:"weeks"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement("aside",null,c.a.createElement("h2",null,"Weeks"),c.a.createElement(W,p)),c.a.createElement("main",null,c.a.createElement("h1",null,"Results for week #",E+1),c.a.createElement(O,{results:s[E]}))))):c.a.createElement("div",{className:"wrapper"},"Loading...")},S=function(){return c.a.createElement(s.a,null,c.a.createElement(o,null),c.a.createElement(D.d,null,c.a.createElement(D.b,{path:"/weeks/:index",component:P}),c.a.createElement(D.b,{path:"/teams/:index",component:I}),c.a.createElement(D.b,{path:"/table",component:w}),c.a.createElement(D.a,{from:"/",to:"/weeks/1"})))},z=(a(43),document.querySelector("#root"));r.a.render(c.a.createElement(S,null),z)}},[[20,1,2]]]);
//# sourceMappingURL=main.21716f88.chunk.js.map